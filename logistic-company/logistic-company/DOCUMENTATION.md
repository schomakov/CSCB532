# Документация – Уеб приложение „Логистична компания“

## 1. Описание на системата

Уеб приложението „Логистична компания“ служи за управление на процесите в логистична компания: приемане и доставяне на пратки, управление на офиси, служители (куриери и офис-служители) и клиенти. Клиентите изпращат и получават пратки от офиси или на адрес. Цената зависи от тегло и тип доставка (до офис е по-евтина от до адрес).

## 2. Функционалности

### 2.1. Регистриране и вход
- **Регистрация:** `/register` – нов потребител се регистрира с потребителско име, парола, имейл, име. По подразбиране получава роля **Клиент**.
- **Вход:** `/login` – вход с потребителско име и парола. След успешен вход потребителят се пренасочва към началната страница.

### 2.2. Роли на потребителите
- **ADMINISTRATOR** – пълен достъп: потребители, компании, офиси, служители, клиенти, пратки и всички справки.
- **EMPLOYEE** – служител (куриер или офис-служител): вижда всички пратки, регистрира и обновява статуси на пратки, достъп до справки.
- **CLIENT** – клиент: вижда само пратките, които е изпратил или получил.

Задаването на роли се прави от администратор в **Админ → Потребители**: избор на роля за всеки потребител.

### 2.3. Въвеждане, показване, редактиране и изтриване на данни

| Обект        | Екран              | Описание |
|-------------|--------------------|----------|
| Логистична компания | `/admin/companies`  | CRUD за компании (име, БУЛСТАТ, адрес, описание). |
| Служител    | `/admin/employees`  | CRUD за служители: тип (куриер/офис-служител), офис, компания, свързване с потребителски акаунт (роля Служител). |
| Клиент      | `/admin/clients`    | CRUD за клиенти, свързване с потребителски акаунт (роля Клиент). |
| Офис        | `/admin/offices`    | CRUD за офиси: име, адрес, телефон, работно време, компания. |
| Пратка      | `/admin/parcels` и `/employee/parcels` | Създаване, редакция, изтриване (админ); служителите регистрират пратки и сменят статус (получена, пристигнала в офис). |

### 2.4. Регистриране на изпратени и получени пратки от служители
- **Служител: Пратки** (`/employee/parcels`): списък с всички пратки, форма за нова пратка (подател, получател, тип доставка, офис/адрес, тегло). Цената се изчислява автоматично (тегло + доплащане за доставка до адрес).
- Бутони за действие: **Получена** (пратката се маркира като доставена), **Пристигнала в офис** (за пратки до офис).

### 2.5. Справки
Достъпни за администратор и служител под **Справки** в менюто:

| Справка | Екран | Описание |
|--------|--------|----------|
| Всички служители | `/reports/employees` | Таблица с всички служители в компанията. |
| Всички клиенти | `/reports/clients` | Таблица с всички клиенти. |
| Всички пратки | `/reports/parcels/all` | Всички регистрирани пратки. |
| Пратки по служител/клиент | `/reports/parcels/select` | Форми за избор: пратки по служител (регистрирани от), по подател (клиент), по получател (клиент). След избор се показва списък с пратки. |
| Неполучени пратки | `/reports/parcels/not-received` | Пратки, които още не са получени. |
| Приходи | `/reports/revenue` | Приходи на фирмата за избран период (от дата – до дата). Сумата се формира от доставените пратки в този период. |

### 2.6. Достъп до пратки по роля
- **Служител:** вижда всички пратки в **Служител: Пратки** (`/employee/parcels`).
- **Клиент:** вижда само своите пратки в **Моите пратки** (`/client/parcels`) – изпратени и получени.

## 3. Екрани (за скрийншоти)

При подготвяне на документация с екрани препоръчително е да се направят снимки на следните страници и да се опише кратко какво показват:

1. **Начало** – начална страница след вход.
2. **Логване / Регистрация** – форми за вход и регистрация.
3. **Админ → Потребители** – списък потребители и смяна на роля.
4. **Админ → Компании / Офиси / Служители / Клиенти / Пратки** – по един екран за списък и (при възможност) форма за редакция.
5. **Служител: Пратки** – списък всички пратки и форма за нова пратка / действия за статус.
6. **Моите пратки** (като клиент) – изпратени и получени пратки.
7. **Справки** – по един екран за: служители, клиенти, всички пратки, пратки по критерий (избор служител/клиент), неполучени пратки, приходи с период.

## 4. Технологии

- **Backend:** Java, Spring Boot 3, Spring Security, Spring Data JPA.
- **Frontend:** Thymeleaf, Bootstrap 5, CSS. Респонсив дизайн (viewport, адаптивни таблици и менюта).
- **База данни:** PostgreSQL (по подразбиране), H2 in-memory за локално разработка (профил `local`).

## 5. Стартиране

- Локално (H2): `./gradlew :logistic-company:bootRun` – приложението използва профил `local`, порт 8091 (или 8090 в зависимост от конфигурацията).
- Тестови потребител (при H2 и data-local.sql): потребител `admin` с парола, зададена в скрипта.

## 6. Разпределение на задачите в екипа

*(Секцията се попълва от екипа: кой какви модули/функции е реализирал – например: регистрация/роли, CRUD компании/офиси, CRUD служители/клиенти/пратки, справки, тестове, документация.)*
